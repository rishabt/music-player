{% load staticfiles %}
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Player</title>
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static "css/foundation.css" %}" />
    <link rel="stylesheet" href="{% static "css/foundation.min.css" %}" />
    <link rel="stylesheet" href="{% static "css/animate.css" %}" />
    <link rel="stylesheet" href="{% static "css/normalize.css" %}" >
    <link rel="stylesheet" href="{% static "css/slick.css" %}" >
    <link rel="stylesheet" href="{% static "css/main.css" %}" >
    <script src="{% static "js/angular.min.js" %}"></script>
    <script src="{% static "js/vendor/modernizr.js" %}"></script>
    <script src="{% static "js/vendor/jquery.js" %}"></script>
    <script src="{% static "js/vendor/placeholder.js" %}"></script>
    <script src="{% static "js/foundation.min.js" %}"></script>
    <script src="{% static "js/foundation/foundation.topbar.js" %}"></script>
    <script>$(document).foundation();</script>
    <script src="{% static "js/moment.js" %}"></script>
    <script src="{% static "js/slick.min.js" %}"></script>
    <script src="{% static "js/wow.js" %}"></script>
    <script src="{% static "js/amplify.js" %}"></script>
    <script src="{% static "js/MobileServices.Web-1.2.2.min.js" %}"></script>
    <style type="text/css">
    .bg{
    <-->max-width: 100%;
    <-->height: auto;
    <-->width: auto\9; /* ie8 */
    }
    </style><script>
	  
	function embed_video(link) {

		var url = link;
		var pattern = /^(http|https)?:\/\/[a-zA-Z0-9-\.]+\.[a-z]{2,4}/;

		if (!pattern.test(url)) {
			html_code = '<iframe id="embeded_video" width="420" height="315" style="background: black; margin-top: 30px;"> </iframe>'
			$('#embeded_video').html(html_code);
			alert("Failed to play song. Try again");

		}
		else {
			link += "?autoplay=1"
			html_code = '<iframe id="embeded_video" style="margin-top: 30px;" width="420" height="315" src=' + link +'> </iframe>'
			$('#embeded_video').html(html_code);
		}
	};


	// $( document ).ready(function() {

	// });
	

	</script>

</head>

<body> 	
	<div class="row" style="margin-top: 20px;">
	<div class="large-3 columns"><br></div>
	<div class="large-5 columns">
		<form action="http:{{room}}" class="search-wrapper" method="GET">
			<input name="query_element" type="text" placeholder="Search here..." required="" maxlength="100">
		</form>
	</div>
	<div class="large-4 columns">
		<button type="submit" value="Search">Search</button>
		<a style="margin-left: 200px;" href="mailto:team_music@ecse428.se"> Contact Us </a>
	</div>
	</div>


	<div class="row">
	
	<div class="medium-6 columns">
	<h5><ins><b> Search Results: </b></ins></h5>
	{% for link in response_message %}
		<div class="video_link" style = "display: table; margin-bottom: 20px;">
			<span>
				<img style = "vertical-align: middle; display: table-cell;" src ={{ link.2 }} />
			</span>
			<span style = "vertical-align:middle; display: table-cell;">
				<a  href="#"> {{ link.0 }} </a>
			</span> 
		</div>
 	{% endfor %}
	</div>
	
    <div class="medium-6 columns" style="border-left: 1px solid black; height: 700px;">
    <div id="embeded_video" style="text-align: center"> <iframe id="embeded_video" width="420" height="315" style="background: black; margin-top: 30px;"> </iframe></div>
    <br>
    <h5 style="text-align: left; margin-left: 100px;"><ins><b> Room Playlist: </b></ins></h5>
    {% if song_list%}
    <ul class="list-group pull-left" style="width: 550px; margin-left: 30px;">
    {% for link in song_list %}
     <li class="list-group-item" ><h5>{{ link.link }}		<a href = "javascript: embed_video('{{ link.link }}');" class="pull-right" style="border-left: 1px solid black">  &nbsp; play </a></h5> </li>
    {% endfor %}
    </ul>
    {% else %}
    <h5> <a href="#"> Add music to the room to start playing</a> </h5>
    {% endif %}
	</div>

		
    </div>



	
</body>

</html>